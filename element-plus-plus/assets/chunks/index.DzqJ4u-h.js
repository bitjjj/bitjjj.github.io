import{w as x}from"./install.CDck28KX.js";import{x as b,y as C,r as f,o as S,n as T,X as W,z as y,H as B,I as c,u as E,B as p,C as R,F as _}from"./framework.CPxOa8kE.js";import{i as g}from"./funcs.AU02Prpg.js";import{a as k}from"./theme.CPYnN67Q.js";const h=function(r,e){if(g||!r||!e)return null;e=b(e),e==="float"&&(e="cssFloat");try{const s=r.style[e];if(s)return s;const t=document.defaultView.getComputedStyle(r,"");return t?t[e]:""}catch{return r.style[e]}},I={effect:{type:String,default:"light"},placement:{type:String,default:"top"},width:[String,Number],method:{type:String,default:"width"},length:{type:Number,default:-1}},L=["innerHTML"],M=C({name:"EppTextOverflow",inheritAttrs:!1,__name:"text-overflow",props:I,setup(r){const e=r,s=f(),t=f(),l=f(!1);let a;const i=()=>{u();const n=t.value.innerText||t.value.textContent;if(s.value=n,e.method==="length"&&e.length!==-1)n.length>e.length?(t.value.childNodes[1].nodeValue=n.substring(0,e.length)+"...",l.value=!1):l.value=!0;else if(e.method==="width"||e.method==="autoWidth"){const o=t.value,d=document.createRange();d.setStart(o,0),d.setEnd(o,o.childNodes.length);const m=d.getBoundingClientRect().width-1,w=(parseInt(h(o,"paddingLeft"),10)||0)+(parseInt(h(o,"paddingRight"),10)||0);m+w>o.offsetWidth||o.scrollWidth>o.offsetWidth?l.value=!1:l.value=!0}v()},v=()=>{a.observe(t.value,{characterData:!0,childList:!0,subtree:!0})},u=()=>{a.disconnect()};return g||(a=new MutationObserver(i)),S(()=>{e.method==="autoWidth"&&e.length>0?(t.value.style.maxWidth=`${e.length}em`,T(()=>{i()})):i()}),W(()=>{u(),a=null}),(n,o)=>(y(),B(E(k),{tooltip:"","popper-class":"text-overflow-poppper",placement:n.placement,effect:n.effect,disabled:l.value,width:n.width},{reference:c(()=>[p("span",_({ref_key:"textContentRef",ref:t,class:"epp-text-overflow"},n.$attrs),[R(n.$slots,"default")],16)]),default:c(()=>[p("div",{class:"text-overflow-content",innerHTML:s.value},null,8,L)]),_:3},8,["placement","effect","disabled","width"]))}}),V=x(M);export{V as E,h as g};
